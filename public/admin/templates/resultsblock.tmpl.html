<div class="ui form segment">
  <h2>Constituency Information</h2>


<div class="ui form segment">
<div class="fields sixteen wide column">
	<div class="field five wide">
        	<input  type="text" id="conName" placeholder="Constituency Name" ng-model="constituency.conName">
    </div>
         <div class="field three wide">
        	<input  type="text" id="conRegn" placeholder="Region" ng-model="constituency.conRegn">
    </div>
    <div class="field three wide">
        	<input  type="text" id="conParty" placeholder="Party" ng-model="constituency.conParty">
    </div>
    <div class="field three wide">
        	<input  type="text" id="conColor" placeholder="Party Color" ng-model="constituency.conColor">
    </div>
    <div class="field two wide">	
        	<checkbox ng-model="constituency.showConstituencyInfo" type="toggle">Show Info</checkbox>
	</div>
</div>
<br />
<div class="fields sixteen wide column">
	<div class="field four wide">
        	<input  type="text" id="conTurnout" placeholder="Turnout" ng-model="constituency.conTurnout">
    </div>
    <div class="field four wide">
        	<input  type="text" id="conMajority" placeholder="Majority" ng-model="constituency.conMajority">
    </div>
    <div class="field four wide">
        	<input  type="text" id="conMPName" placeholder="MP Name" ng-model="constituency.conMPName">
    </div>
    <div class="field four wide">
        	<input  type="text" id="conDescription" placeholder="Description" ng-model="constituency.conDescription">
    </div>
</div>
<br />
<div class="fields sixteen wide column">
	<div class="field four wide">
        	<input  id="conPartyOne" type="text" placeholder="Party One" ng-model="constituency.conPartyOne">
        	<input  id="conPartyOneVotes" type="hidden" ng-model="constituency.conPartyOneVotes">
        	<input  id="conPartyOnePercent" type="hidden" ng-model="constituency.conPartyOnePercent">
        	<input  id="conPartyOneColor" type="hidden" ng-model="constituency.conPartyOneColor">
    </div>
    <div class="field four wide">
        	<input  id="conPartyTwo" type="text" placeholder="Party Two" ng-model="constituency.conPartyTwo">
        	<input  id="conPartyTwoVotes" type="hidden" ng-model="constituency.conPartyTwoVotes">
        	<input  id="conPartyTwoPercent" type="hidden" ng-model="constituency.conPartyTwoPercent">
        	<input  id="conPartyTwoColor" type="hidden" ng-model="constituency.conPartyTwoColor">
    </div>
    <div class="field four wide">
        	<input  id="conPartyThree" type="text" placeholder="Party Three" ng-model="constituency.conPartyThree">
        	<input  id="conPartyThreeVotes" type="hidden" ng-model="constituency.conPartyThreeVotes">
        	<input  id="conPartyThreePercent" type="hidden" ng-model="constituency.conPartyThreePercent">
        	<input  id="conPartyThreeColor" type="hidden" ng-model="constituency.conPartyThreeColor">
    </div>
    <div class="field four wide">
        	<input  id="conPartyFour" type="text" placeholder="Party Four" ng-model="constituency.conPartyFour">
        	<input  id="conPartyFourVotes" type="hidden" ng-model="constituency.conPartyFourVotes">
        	<input  id="conPartyFourPercent" type="hidden" ng-model="constituency.conPartyFourPercent">
        	<input  id="conPartyFourColor" type="hidden" ng-model="constituency.conPartyFourColor">
    </div>
</div>
<br />
<div class="fields sixteen wide column">
	<div class="field four wide">
        	<input  id="conEULeave" type="text" placeholder="EU Remain Percentage" ng-model="constituency.euremain">
    </div>
    <div class="field four wide">
        	<input  id="conEURemain" type="text" placeholder="EU Leave Percentage" ng-model="constituency.euleave">
    </div>

</div>
</div>

<div class="ui form segment">
<h2>Get Searching</h2>
<div class="sixteen wide column">
<form role="form">
        <div class="form-group">
          <input type="text" class="form-control input-lg" id="consearch" placeholder="Type constituency name here...">
        </div>
</form>
</div>
</div>

<div class="ui form segment">
<div id="constituencyresults">Please search using the bar above</div>
</div>


</div>
<script>
$(window).load(function(){
        $('#consearch').keyup(function(){
            var searchField = $('#consearch').val();
            var regex = new RegExp(searchField, "i");
            var output = '<div class="four wide column">';
            var count = 1;
            $.getJSON('/data/data_dump.json', function(data) {
              $.each(data, function(key, val){
                if ((val.Const_Name.search(regex) != -1)) {
                  output += '<div class="sixteen wide field" style="clear: both">';
                  output += '<button style="float:left;" style="vertical-align:middle" class="ui green button" onclick="getConstituencyData(\''+ val.Const_Name + '\',\'' + val.REGN + '\',\'' + val.Winner15 + '\',\'' + val.Color + '\',\'' + val.VALID15 + '\',\'' + val.MAJ + '\',\'' + val.MP_Name + '\',\'' + val.Result + '\',\'' + val.Winner + '\',\'' + val.Second + '\',\'' + val.Result + '\',\'' + val.Color + '\',\'' + val.EUHANLEAVE + '\',\'' + val.EUHANREM  + '\')">Get Data</button>';
                  output += '<h2 style="color:' +val.Color + '">' + val.Const_Name + ' - ' + val.Winner15 +'&nbsp; </h2></div>';
                  count++;
                }
              });
              output += '</div>';
              $('#constituencyresults').html(output);
            }); 
        });
      });
</script>

<script>
	function getConstituencyData(Const_Name,Regn,Winner15,Color,Turnout,Majority,MPName,Description,PartyOne,PartyOneVotes,PartyOnePercent,PartyOneColor,EUHANLEAVE,EUHANREM) {
		function numberWithCommas(x) {
			return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
		}
		document.getElementById("conName").value = Const_Name;
		document.getElementById("conRegn").value = Regn;
		document.getElementById("conParty").value = Winner15;
		document.getElementById("conColor").value = Color;
		document.getElementById("conTurnout").value = numberWithCommas(Turnout);
		document.getElementById("conMajority").value = numberWithCommas(Majority);
		document.getElementById("conMPName").value = MPName;
		document.getElementById("conDescription").value = Description;
		document.getElementById("conPartyOne").value = PartyOne;
		document.getElementById("conPartyOneVotes").value = PartyOneVotes;
		document.getElementById("conPartyOnePercent").value = PartyOnePercent;
		document.getElementById("conPartyOneColor").value = PartyOneColor;
		document.getElementById("conEULeave").value = (EUHANLEAVE * 100).toFixed(2);
		document.getElementById("conEURemain").value = (EUHANREM * 100).toFixed(2);
}
</script>